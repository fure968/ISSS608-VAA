---
title: "Hands on Exercise 2"
author: "Guan Jhen Lin"
date: "Apr 20, 2024"
date-modified: "last-modified"
execute: 
  eval: true
  echo: true
  warning: false
  freeze: true
---

# Getting Started

<!-- Google tag (gtag.js) -->
\<script async src="https://www.googletagmanager.com/gtag/js?id=G-65B5RWMGTX"\>\</script\>
\<script\>
window.dataLayer = window.dataLayer \|\| \[\];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-65B5RWMGTX');
\</script\>

Load and Install the required R packages

```{r}
pacman::p_load (tidyverse, forcats, ggrepel, patchwork, 
         ggthemes, tidyverse)
```

# Import Data

```{r, message=FALSE}
exam_data <- read_csv("data/Exam_data.csv")
summary(exam_data)
```

# Annotation: ggrepel

Compare when using annotation

```{css, echo=FALSE}
.panel-tabset .nav-item {
  font-size: 30px;
  font-style: italic
}
```

::: panel-tabset
## without ggrepel

```{r}
ggplot(data=exam_data, 
       aes(x= MATHS, 
           y=ENGLISH)) +
  geom_point() +
  geom_smooth(method=lm, 
              linewidth=0.5) +  
  geom_label(aes(label = ID), 
                   fontface = "bold") +
  coord_cartesian(xlim=c(0,100),
                  ylim=c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")
```

## with ggrepel

```{r}
ggplot(data=exam_data, 
       aes(x= MATHS, 
           y=ENGLISH)) +
  geom_point() +
  geom_smooth(method=lm, 
              size=0.5, 
              formula = y~x) +  
  geom_label_repel(aes(label = ID), 
                   fontface = "bold") +
  coord_cartesian(xlim=c(0,100),
                  ylim=c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")
```
:::

# ggplot2 Themes

```{r}
ggplot(data=exam_data, 
             aes(x = MATHS)) +
  geom_histogram(bins=20, 
                 boundary = 100,
                 color="yellow2", 
                 fill="grey60") +
  theme_classic() +
  ggtitle("Distribution of Maths scores") 
```

# ggtheme package

Using different themes

```{css, echo=FALSE}
.panel-tabset .nav-item {
  font-size: 30px;
  font-style: italic
}
```

::: panel-tabset
## economist

```{r}
ggplot(data=exam_data, 
             aes(x = MATHS)) +
  geom_histogram(bins=20, 
                 boundary = 100,
                 color="grey25", 
                 fill="grey90") +
  ggtitle("Distribution of Maths scores") +
  theme_economist()
```

## wsj

```{r}
ggplot(data=exam_data, 
             aes(x = MATHS)) +
  geom_histogram(bins=20, 
                 boundary = 100,
                 color="grey25", 
                 fill="grey90") +
  ggtitle("Distribution of Maths scores") +
  theme_wsj()
```

## solarised

```{r}
ggplot(data=exam_data, 
             aes(x = MATHS)) +
  geom_histogram(bins=20, 
                 boundary = 100,
                 color="grey25", 
                 fill="grey90") +
  ggtitle("Distribution of Maths scores") +
  theme_solarized()
```
:::

# Combining Graphs

Step 1: Create single graphs

```{css, echo=FALSE}
.panel-tabset .nav-item {
  font-size: 30px;
  font-style: italic
}
```

::: panel-tabset
## 1

```{r}
p1 <- ggplot(data=exam_data, 
             aes(x = MATHS)) +
  geom_histogram(bins=20, 
                 boundary = 100,
                 color="grey25", 
                 fill="grey90") + 
  coord_cartesian(xlim=c(0,100)) +
  ggtitle("Distribution of Maths scores")
```

## 2

```{r}
p2 <- ggplot(data=exam_data, 
             aes(x = ENGLISH)) +
  geom_histogram(bins=20, 
                 boundary = 100,
                 color="grey25", 
                 fill="grey90") +
  coord_cartesian(xlim=c(0,100)) +
  ggtitle("Distribution of English scores")
```

## 3

```{r}
p3 <-  
  ggplot(data=exam_data, 
             aes(x= MATHS, 
                 y=ENGLISH)) +
  geom_point() +
  geom_smooth(method=lm, 
              size=0.5) +  
  coord_cartesian(xlim=c(0,100),
                  ylim=c(0,100)) +
  ggtitle("English scores versus Maths scores for Primary 3")
```
:::

Step 2: Combining

```{r}
(p1 / p2) | p3
```

```{r}
p3 + inset_element(p2, 
                   left = 0.02, 
                   bottom = 0.7, 
                   right = 0.5, 
                   top = 1)
```

```{r}
patchwork <- (p1 / p2) | p3
patchwork & theme_economist()
```
